
<div class="modal-header">
  <h4 class="modal-title">Provider</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body">
  <app-message [response]="response"></app-message>
  <form>
    <div class="mb-3 row">
      <label for="path" class="col-sm-2 col-form-label fw-bold">Base-Path</label>
      <div class="col-sm-10">
        <div class="input-group">
          <input type="text" id="path" name="path" [(ngModel)]="provider.path" class="form-control">
          <button class="btn btn-outline-secondary" type="button" [ngbPopover]="basePathHelp"><i class="bi bi-question"></i></button>
          <ng-template #basePathHelp>Base-Path of the API endpoint i.e. <code>/acme/news</code>. The provider creates all routes under this path</ng-template>
        </div>
      </div>
    </div>
    <div class="mb-3 row">
      <label for="scopes" class="col-sm-2 col-form-label fw-bold">Scopes</label>
      <div class="col-sm-10">
        <div class="input-group">
          <input type="text" id="scopes" name="scopes" [(ngModel)]="provider.scopes" class="form-control">
          <button class="btn btn-outline-secondary" type="button" [ngbPopover]="scopesHelp"><i class="bi bi-question"></i></button>
          <ng-template #scopesHelp>Assign specific scopes to the routes</ng-template>
        </div>
      </div>
    </div>
    <div class="mb-3 row">
      <label for="class" class="col-sm-2 col-form-label fw-bold">Class</label>
      <div class="col-sm-10">
        <div class="input-group">
          <select id="class" name="class" [(ngModel)]="selected" (change)="loadConfig()" class="form-select">
            <option *ngFor="let provider of providers" [ngValue]="provider.class">{{provider.name}}</option>
          </select>
          <button class="btn btn-outline-secondary" type="button" [ngbPopover]="classHelp"><i class="bi bi-question"></i></button>
          <ng-template #classHelp>Action class which gets executed. Each action can provide additional configuration parameters which are loaded if a class was selected</ng-template>
        </div>
      </div>
    </div>
    <app-config-form *ngIf="form" [container]="form" [data]="provider.config" (dataChange)="provider.config = $event"></app-config-form>
  </form>
  <div *ngIf="changelog">
    <ngb-accordion activeIds="ngb-panel-0">
      <ngb-panel title="Routes" *ngIf="changelog.routes && changelog.routes.length > 0">
        <ng-template ngbPanelContent>
          <table class="table">
            <tbody>
            <tr *ngFor="let route of changelog.routes">
              <th>{{route.path}}</th>
            </tr>
            </tbody>
          </table>
        </ng-template>
      </ngb-panel>
      <ngb-panel title="Actions" *ngIf="changelog.actions && changelog.actions.length > 0">
        <ng-template ngbPanelContent>
          <table class="table">
            <tbody>
            <tr *ngFor="let action of changelog.actions">
              <th>{{action.name}}</th>
            </tr>
            </tbody>
          </table>
        </ng-template>
      </ngb-panel>
      <ngb-panel title="Schemas" *ngIf="changelog.schemas && changelog.schemas.length > 0">
        <ng-template ngbPanelContent>
          <table class="table">
            <tbody>
            <tr *ngFor="let schema of changelog.schemas">
              <th>{{schema.name}}</th>
            </tr>
            </tbody>
          </table>
        </ng-template>
      </ngb-panel>
    </ngb-accordion>
  </div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="loadChangelog()">Changelog</button>
  <button type="button" class="btn btn-primary" (click)="submit()">Create</button>
  <button type="button" class="btn btn-light" (click)="modal.close()">Close</button>
</div>
